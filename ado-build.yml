pool:
  vmImage: "ubuntu-latest"

trigger:
  branches:
    include:
      - 'main'
      - 'release/*'
pr: none

stages:
  - stage: Compile
    jobs:
      - job: Compile
        # pool: vscode-1es-linux
        steps:
          - script: |
              echo HERE
              # sleep 10
              echo HERE2
              echo $(Agent.JobStatus)
              exit 1
  - stage: IM_Notification
    dependsOn:
      - Compile
    condition: always()
    # pool: vscode-1es-linux
    jobs:
      - job: IM_Notification
        steps:
          - script: |
              echo "$(Agent.JobStatus)"
              echo "${{ stageDependencies }}"
              echo "${{ stageDependencies.Compile.Compile.result }}" # "Succeeded|SucceededWithIssues|Skipped|Failed|Canceled"
          - template: ado-build-chat.yml
